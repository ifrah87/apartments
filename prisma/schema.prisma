generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider  = "postgresql"
  url       = env("DATABASE_URL") // <- pooler for local dev runtime & db push
}

model Property {
  id        String   @id @default(cuid())
  name      String
  address   String
  city      String
  units     Unit[]
  createdAt DateTime @default(now())
}

model Unit {
  id         String   @id @default(cuid())
  property   Property @relation(fields: [propertyId], references: [id])
  propertyId String
  unitLabel  String
  status     String   @default("vacant")
  leases     Lease[] // tenants are reachable via leases
  createdAt  DateTime @default(now())
}

model Tenant {
  id        String   @id @default(cuid())
  name      String
  email     String   @unique
  phone     String?
  leases    Lease[]
  createdAt DateTime @default(now())
}

model Lease {
  id        String    @id @default(cuid())
  unit      Unit      @relation(fields: [unitId], references: [id])
  unitId    String
  tenant    Tenant    @relation(fields: [tenantId], references: [id])
  tenantId  String
  startDate DateTime
  endDate   DateTime
  rent      Float
  payments  Payment[]
  createdAt DateTime  @default(now())
}

model Payment {
  id      String   @id @default(cuid())
  lease   Lease    @relation(fields: [leaseId], references: [id])
  leaseId String
  amount  Float
  paidAt  DateTime @default(now())
}
